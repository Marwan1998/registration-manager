<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Find</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous" />
  <link rel="stylesheet" href="/public/css/search.css">
  <link rel="stylesheet" href="/public/css/general.css">
  <link rel="stylesheet" href="/public/css/footer.css" />
  <link type="css" rel="stylesheet" href="/public/css/icons/" />
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light rounded selectNone" aria-label="Eleventh navbar example">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">RegMang</a>
        <div class="collapse navbar-collapse" id="navbarsExample09">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
          </ul>
          <li class="navbar-nav nav-item about">
            <a class="nav-link" href="#">New</a>
          </li>
          <li class="navbar-nav nav-item about">
            <a class="nav-link" href="#">Find</a>
          </li>
          <li class="navbar-nav nav-item about">
            <a class="nav-link" href="#">Logout</a>
          </li>
        </div>
      </div>
    </nav>
  </header>
  <br><br><br><br>

  <form id="form" method="POST">
    <div class="formCont selectNone">

      <input type="text" placeholder="Search..." autofocus autocomplete="off" id="filterWebsite" />
      <ul id="websitesList">
        <!-- <button class="costomBtn fitDiv">About</button>
      <button class="costomBtn fitDiv">Base</button>
      <button class="costomBtn fitDiv">Blog</button>
      <input type="text"> -->
      </ul>

    </div>
  </form>


  <footer class="footer-distributed">
      <div class="footer-right">
        <a
          href="https://www.facebook.com/people/Marwan-Alghadi/100010510052186/" target="_blank" rel="noopener noreferrer">
          <em class="fa fa-facebook"></em
        ></a>
        <a href="https://ly.linkedin.com/in/marwan-algadi-445a151a3" target="_blank" rel="noopener noreferrer">
          <em class="fa fa-linkedin"></em
        ></a>
        <a href="https://github.com/Marwan1998/registration-manager" target="_blank" rel="noopener noreferrer">
          <em class="fa fa-github"></em
        ></a>
      </div>
      <div class="footer-left">
        <p class="footer-links">
          <a class="link-1" href="#">Home</a>
          <a href="#">About</a>
          <a href="#">Contact</a>
        </p>
        <p>Characters &copy; 2021</p>
      </div>
    </footer>

  <script>
    // this array must be sent from te DB
    let websites = ['Goku', 'Naruto', 'Ichigo', 'Flash', 'Batman', 'Khaleesi', 'Luffy', 'Batman', 'Khaleesi', 'Steve Fox'];

    let ul = document.getElementById("websitesList");
    let renderWebsites = function (websites) {
      ul.innerHTML = "";
      for (const site of websites) {
        let a = document.createElement('a');
        a.innerText = site;
        a.addEventListener('click', () => {
          document.getElementById('filterWebsite').value = a.innerText;
          document.getElementById('form').submit()
        });
        ul.appendChild(a);
      }
    }

    // filter mechanism
    let input = document.getElementById('filterWebsite');
    let filterWebsites = function (event) {
      let keyword = input.value.toLowerCase();
      let filtered_websites = websites.filter(website => website.toLowerCase().indexOf(keyword) > -1);
      // this will render only after typing something, if search box is empty then render nothing.
      filtered_websites.length == websites.length ? renderWebsites([]) : renderWebsites(filtered_websites);
    }
    input.addEventListener('keyup', filterWebsites);
  </script>
</body>

</html>